pipeline{
    agent any
	
    environment {
    	DOCKERHUB_CREDENTIALS = credentials('dockerhub')
      }

stages{
    
	    
	   stage('Pull docker image') {
    	  steps {
      		  sh 'echo $DOCKERHUB_CREDENTIALS_PSW | docker login -u $DOCKERHUB_CREDENTIALS_USR --password-stdin'
		  sh 'docker pull samarbelhadj/config-server:1.0'
     		 }
  	  }
	  
	  
	     
	   stage('create pod') {
    	  steps {
      		  sh 'cat myapp.yml'
		  sh 'minikube status'
		  sh 'kubectl create -f myapp.yml'
		   sh 'kubectl get pods'
     		 }
  	  }
	  
	  
	  
	  
	   

    }
  
	    
	 
   



	    
    }
	    
  
